<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monthly Hits - mymelody</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #ff9ec8;
            --secondary: #b5e8ff;
            --accent: #ffd166;
            --text: #5a5a5a;
            --light: #fff9fc;
            --card-bg: #ffffff;
            --shadow: rgba(255, 158, 200, 0.2);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Nunito', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--light);
            color: var(--text);
            line-height: 1.6;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px 0;
            box-shadow: 0 4px 12px var(--shadow);
            border-radius: 0 0 25px 25px;
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: "";
            position: absolute;
            top: -50px;
            right: -50px;
            width: 150px;
            height: 150px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }
        
        header::after {
            content: "";
            position: absolute;
            bottom: -30px;
            left: -30px;
            width: 100px;
            height: 100px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }
        
        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 1;
        }
        
        .logo {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .logo i {
            font-size: 2.5rem;
            margin-right: 10px;
            text-shadow: 2px 2px 0px rgba(0, 0, 0, 0.1);
        }
        
        .logo h1 {
            font-size: 2.2rem;
            font-weight: 800;
            text-shadow: 2px 2px 0px rgba(0, 0, 0, 0.1);
        }
        
        nav ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-bottom: 15px;
        }
        
        nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: 600;
            padding: 8px 15px;
            border-radius: 20px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
        }
        
        nav ul li a i {
            margin-right: 5px;
        }
        
        nav ul li a:hover {
            background-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        
        .search-form {
            display: flex;
            width: 100%;
            max-width: 500px;
            margin-top: 10px;
        }
        
        .search-form input {
            flex: 1;
            padding: 12px 20px;
            border: none;
            border-radius: 30px 0 0 30px;
            font-size: 1rem;
            outline: none;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .search-form button {
            background-color: var(--accent);
            color: white;
            border: none;
            padding: 0 20px;
            border-radius: 0 30px 30px 0;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .search-form button:hover {
            background-color: #ffc145;
        }
        
        main {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
        }
        
        .page-title {
            text-align: center;
            margin-bottom: 30px;
            color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .page-title i {
            background-color: var(--secondary);
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-size: 1.8rem;
        }
        
        .page-title h2 {
            font-size: 2.5rem;
            font-weight: 800;
        }
        
        .month-selector {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .month-btn {
            background-color: var(--card-bg);
            border: 2px solid var(--secondary);
            padding: 10px 20px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 600;
            color: var(--text);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .month-btn.active {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        .month-btn:hover:not(.active) {
            background-color: var(--secondary);
            transform: translateY(-3px);
        }
        
        .charts-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        .chart-section {
            background-color: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 5px 15px var(--shadow);
            transition: transform 0.3s ease;
        }
        
        .chart-section:hover {
            transform: translateY(-5px);
        }
        
        .chart-section h3 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .chart-section h3 i {
            background-color: var(--secondary);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .song-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .song-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background-color: #f8f8f8;
            border-radius: 15px;
            transition: all 0.3s ease;
            position: relative;
            cursor: pointer;
        }
        
        .song-item:hover {
            background-color: #f0f0f0;
            transform: translateX(5px);
        }
        
        .song-item.playing {
            background-color: #fff5f9;
            box-shadow: 0 0 0 2px var(--primary);
        }
        
        .song-rank {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--primary);
            width: 40px;
            text-align: center;
            margin-right: 15px;
        }
        
        .song-rank.top-3 {
            color: var(--accent);
        }
        
        .song-cover {
            width: 60px;
            height: 60px;
            border-radius: 10px;
            margin-right: 15px;
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            position: relative;
            overflow: hidden;
        }
        
        .song-cover .play-indicator {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 158, 200, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .song-item:hover .song-cover .play-indicator {
            opacity: 1;
        }
        
        .song-info {
            flex: 1;
        }
        
        .song-info h4 {
            margin-bottom: 5px;
            color: var(--text);
        }
        
        .song-info p {
            color: #888;
            font-size: 0.9rem;
        }
        
        .song-stats {
            display: flex;
            align-items: center;
            gap: 15px;
            color: #888;
            font-size: 0.9rem;
        }
        
        .song-stats i {
            margin-right: 5px;
        }
        
        .play-btn {
            background-color: var(--primary);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 2;
        }
        
        .play-btn:hover {
            background-color: #ff7eb3;
            transform: scale(1.1);
        }
        
        .play-btn.playing {
            background-color: var(--accent);
        }
        
       
        .music-player {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 15px 0;
            box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            transform: translateY(100%);
            transition: transform 0.4s ease;
        }
        
        .music-player.active {
            transform: translateY(0);
        }
        
        .player-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .player-info {
            display: flex;
            align-items: center;
            gap: 15px;
            flex: 1;
        }
        
        .player-cover {
            width: 60px;
            height: 60px;
            border-radius: 10px;
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        
        .player-details h4 {
            margin-bottom: 5px;
            font-size: 1.1rem;
        }
        
        .player-details p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
        }
        
        .player-controls {
            display: flex;
            align-items: center;
            gap: 20px;
            flex: 1;
            justify-content: center;
        }
        
        .control-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .control-btn:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .play-pause-btn {
            background-color: white;
            color: var(--primary);
            width: 50px;
            height: 50px;
            font-size: 1.5rem;
        }
        
        .play-pause-btn:hover {
            background-color: #f0f0f0;
        }
        
        .player-progress {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .progress-bar {
            flex: 1;
            height: 5px;
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 5px;
            overflow: hidden;
            cursor: pointer;
        }
        
        .progress {
            height: 100%;
            background-color: white;
            width: 0%;
            transition: width 0.1s linear;
        }
        
        .time {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.8);
            min-width: 40px;
        }
        
        .volume-control {
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
            justify-content: flex-end;
        }
        
        .volume-bar {
            width: 80px;
            height: 5px;
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 5px;
            overflow: hidden;
            cursor: pointer;
        }
        
        .volume-level {
            height: 100%;
            background-color: white;
            width: 80%;
        }
        
        .artist-highlights {
            margin-top: 40px;
        }
        
        .artist-highlights h3 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .artist-highlights h3 i {
            background-color: var(--secondary);
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .artist-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .artist-card {
            background: linear-gradient(135deg, var(--secondary), #d4f2ff);
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .artist-card:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
        }
        
        .artist-img {
            width: 100%;
            height: 150px;
            background-color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
        }
        
        .artist-info {
            padding: 15px;
        }
        
        .artist-info h4 {
            margin-bottom: 5px;
            color: var(--text);
        }
        
        .artist-info p {
            color: #888;
            font-size: 0.9rem;
        }
        
        footer {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            text-align: center;
            padding: 20px 0;
            margin-top: 40px;
            border-radius: 25px 25px 0 0;
        }
        
        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .social-icons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 15px 0;
        }
        
        .social-icons a {
            color: white;
            font-size: 1.5rem;
            transition: all 0.3s ease;
        }
        
        .social-icons a:hover {
            transform: translateY(-5px);
        }
        
        @media (max-width: 768px) {
            .charts-container {
                grid-template-columns: 1fr;
            }
            
            .artist-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            nav ul {
                gap: 10px;
            }
            
            .logo h1 {
                font-size: 1.8rem;
            }
            
            .page-title {
                flex-direction: column;
                gap: 10px;
            }
            
            .player-container {
                flex-wrap: wrap;
                gap: 15px;
            }
            
            .player-info, .player-controls, .player-progress, .volume-control {
                flex: 100%;
                justify-content: center;
            }
        }
        
        @media (max-width: 480px) {
            .artist-grid {
                grid-template-columns: 1fr 1fr;
            }
            
            nav ul {
                flex-direction: column;
                gap: 5px;
            }
            
            .logo {
                flex-direction: column;
                text-align: center;
            }
            
            .logo i {
                margin-right: 0;
                margin-bottom: 5px;
            }
            
            .month-selector {
                flex-direction: column;
                align-items: center;
            }
            
            .month-btn {
                width: 80%;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-music"></i>
                <h1>mymelody</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="main.html"><i class="fas fa-home"></i> Home</a></li>
                    <li><a href="hits.html" class="active"><i class="fas fa-chart-line"></i> Monthly Hits</a></li>
                    <li><a href="contact.html"><i class="fas fa-envelope"></i> Contact</a></li>
                </ul>
            </nav>
            <form class="search-form" action="search.html" method="get">
                <input type="text" name="query" placeholder="Search for songs, artists, or playlists...">
                <button type="submit"><i class="fas fa-search"></i></button>
            </form>
        </div>
    </header>
    
    <main>
        <div class="page-title">
            <i class="fas fa-trophy"></i>
            <h2>Monthly Hits</h2>
        </div>
        
        <div class="month-selector">
            <button class="month-btn" id="prev-month"><i class="fas fa-chevron-left"></i> Previous</button>
            <button class="month-btn active"><i class="fas fa-calendar-alt"></i> <span id="current-month">October 2024</span></button>
            <button class="month-btn" id="next-month">Next <i class="fas fa-chevron-right"></i></button>
        </div>
        
        <div class="charts-container">
            <section class="chart-section">
                <h3><i class="fas fa-globe-americas"></i> Global Top 10</h3>
                <div class="song-list" id="top-songs-list">
                   
                    <div class="loading">Loading top songs...</div>
                </div>
            </section>
            
            <section class="chart-section">
                <h3><i class="fas fa-heart"></i> Most Loved</h3>
                <div class="song-list" id="loved-songs-list">
                    
                    <div class="loading">Loading most loved songs...</div>
                </div>
            </section>
        </div>
        
        <section class="artist-highlights">
            <h3><i class="fas fa-crown"></i> Artist Highlights</h3>
            <div class="artist-grid" id="artists-grid">
                
                <div class="loading">Loading artists...</div>
            </div>
        </section>
    </main>
    
   
    <div class="music-player" id="music-player">
        <div class="player-container">
            <div class="player-info">
                <div class="player-cover">
                    <i class="fas fa-music"></i>
                </div>
                <div class="player-details">
                    <h4 id="current-song">Select a song to play</h4>
                    <p id="current-artist">mymelody</p>
                </div>
            </div>
            
            <div class="player-controls">
                <button class="control-btn" id="prev-btn">
                    <i class="fas fa-step-backward"></i>
                </button>
                <button class="control-btn play-pause-btn" id="play-pause-btn">
                    <i class="fas fa-play" id="play-pause-icon"></i>
                </button>
                <button class="control-btn" id="next-btn">
                    <i class="fas fa-step-forward"></i>
                </button>
            </div>
            
            <div class="player-progress">
                <span class="time" id="current-time">0:00</span>
                <div class="progress-bar" id="progress-bar">
                    <div class="progress" id="progress"></div>
                </div>
                <span class="time" id="duration">0:00</span>
            </div>
            
            <div class="volume-control">
                <button class="control-btn" id="mute-btn">
                    <i class="fas fa-volume-up"></i>
                </button>
                <div class="volume-bar" id="volume-bar">
                    <div class="volume-level" id="volume-level"></div>
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <div class="footer-content">
            <div class="social-icons">
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-tiktok"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-facebook"></i></a>
            </div>
            <p>&copy; 2024 mymelody. All rights reserved.</p>
            <p>Made with <i class="fas fa-heart" style="color: #ff6b9d;"></i> for music lovers</p>
        </div>
    </footer>

   
    <audio id="audio-player" style="display: none;"></audio>

    <script>
        
        let songs = [];
        let topArtists = [];
        let currentSongIndex = -1;
        let isPlaying = false;

        
        const audioPlayer = document.getElementById('audio-player');
        const musicPlayer = document.getElementById('music-player');
        const currentSongElement = document.getElementById('current-song');
        const currentArtistElement = document.getElementById('current-artist');
        const playPauseBtn = document.getElementById('play-pause-btn');
        const playPauseIcon = document.getElementById('play-pause-icon');
        const progressBar = document.getElementById('progress-bar');
        const progress = document.getElementById('progress');
        const currentTimeElement = document.getElementById('current-time');
        const durationElement = document.getElementById('duration');
        const volumeBar = document.getElementById('volume-bar');
        const volumeLevel = document.getElementById('volume-level');
        const muteBtn = document.getElementById('mute-btn');

        
        async function loadSongs() {
            try {
                const response = await fetch('hits.php?get_songs=true');
                const data = await response.json();
                
                if (data.success) {
                    songs = data.songs;
                    topArtists = data.top_artists;
                    
                    
                    updateSongsUI();
                    updateArtistsUI();
                } else {
                    throw new Error('Failed to load songs');
                }
                
            } catch (error) {
                console.error('Error loading songs:', error);
                document.getElementById('top-songs-list').innerHTML = '<div class="error">Error loading songs</div>';
                document.getElementById('loved-songs-list').innerHTML = '<div class="error">Error loading songs</div>';
                document.getElementById('artists-grid').innerHTML = '<div class="error">Error loading artists</div>';
            }
        }

        
        function updateSongsUI() {
            const topSongsList = document.getElementById('top-songs-list');
            const lovedSongsList = document.getElementById('loved-songs-list');
            
            
            const topSongs = [...songs].sort((a, b) => b.plays - a.plays).slice(0, 10);
           
            const lovedSongs = [...songs].sort((a, b) => b.likes - a.likes).slice(0, 10);
            
            
            topSongsList.innerHTML = topSongs.map((song, index) => `
                <div class="song-item" data-song-id="${song.id}">
                    <div class="song-rank ${index < 3 ? 'top-3' : ''}">${index + 1}</div>
                    <div class="song-cover">
                        <i class="fas fa-music"></i>
                        <div class="play-indicator">
                            <i class="fas fa-play"></i>
                        </div>
                    </div>
                    <div class="song-info">
                        <h4>${escapeHtml(song.title)}</h4>
                        <p>${escapeHtml(song.artist)}</p>
                    </div>
                    <div class="song-stats">
                        <span><i class="fas fa-play"></i> ${formatNumber(song.plays)}</span>
                        <span><i class="fas fa-heart"></i> ${formatNumber(song.likes)}</span>
                    </div>
                    <button class="play-btn" data-song-id="${song.id}">
                        <i class="fas fa-play"></i>
                    </button>
                </div>
            `).join('');
            
            
            lovedSongsList.innerHTML = lovedSongs.map((song, index) => `
                <div class="song-item" data-song-id="${song.id}">
                    <div class="song-rank ${index < 3 ? 'top-3' : ''}">${index + 1}</div>
                    <div class="song-cover">
                        <i class="fas fa-heart"></i>
                        <div class="play-indicator">
                            <i class="fas fa-play"></i>
                        </div>
                    </div>
                    <div class="song-info">
                        <h4>${escapeHtml(song.title)}</h4>
                        <p>${escapeHtml(song.artist)}</p>
                    </div>
                    <div class="song-stats">
                        <span><i class="fas fa-play"></i> ${formatNumber(song.plays)}</span>
                        <span><i class="fas fa-heart"></i> ${formatNumber(song.likes)}</span>
                    </div>
                    <button class="play-btn" data-song-id="${song.id}">
                        <i class="fas fa-play"></i>
                    </button>
                </div>
            `).join('');
            
            
            attachSongEventListeners();
        }

       
        function updateArtistsUI() {
            const artistsGrid = document.getElementById('artists-grid');
            
            artistsGrid.innerHTML = topArtists.map(artist => `
                <div class="artist-card">
                    <div class="artist-img">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="artist-info">
                        <h4>${escapeHtml(artist.artist)}</h4>
                        <p>${artist.song_count} songs â€¢ ${formatNumber(artist.total_plays)} plays</p>
                    </div>
                </div>
            `).join('');
        }

        
        function formatNumber(num) {
            if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + 'M';
            } else if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'K';
            }
            return num;
        }

        
        function formatTime(seconds) {
            if (isNaN(seconds)) return '0:00';
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
        }

        
        function updateProgress() {
            if (audioPlayer.duration && !isNaN(audioPlayer.duration)) {
                const progressPercent = (audioPlayer.currentTime / audioPlayer.duration) * 100;
                progress.style.width = `${progressPercent}%`;
                currentTimeElement.textContent = formatTime(audioPlayer.currentTime);
            }
        }

        
        function playSong(songId) {
            if (!songs.length) return;
            
            const songIndex = songs.findIndex(song => song.id == songId);
            if (songIndex === -1) return;
            
           
            document.querySelectorAll('.song-item').forEach(item => item.classList.remove('playing'));
            document.querySelectorAll('.play-btn').forEach(btn => {
                btn.innerHTML = '<i class="fas fa-play"></i>';
                btn.classList.remove('playing');
            });
            
            
            currentSongIndex = songIndex;
            const song = songs[songIndex];
            
            
            currentSongElement.textContent = song.title;
            currentArtistElement.textContent = song.artist;
            
            
            audioPlayer.src = `hits.php?play_song=${song.id}`;
            
           
            const currentSongItem = document.querySelector(`.song-item[data-song-id="${song.id}"]`);
            const currentPlayBtn = document.querySelector(`.play-btn[data-song-id="${song.id}"]`);
            if (currentSongItem && currentPlayBtn) {
                currentSongItem.classList.add('playing');
                currentPlayBtn.innerHTML = '<i class="fas fa-pause"></i>';
                currentPlayBtn.classList.add('playing');
            }
            
            
            musicPlayer.classList.add('active');
            
            
            audioPlayer.play().then(() => {
                isPlaying = true;
                playPauseIcon.classList.remove('fa-play');
                playPauseIcon.classList.add('fa-pause');
                
                
                audioPlayer.addEventListener('loadedmetadata', function() {
                    durationElement.textContent = formatTime(audioPlayer.duration);
                }, { once: true });
                
            }).catch(error => {
                console.error('Playback failed:', error);
                alert('Error playing song. The audio file might not be available.');
            });
        }

        
        function togglePlayPause() {
            if (currentSongIndex === -1 || !songs.length) return;
            
            if (isPlaying) {
                audioPlayer.pause();
                playPauseIcon.classList.remove('fa-pause');
                playPauseIcon.classList.add('fa-play');
                
                
                const currentSong = songs[currentSongIndex];
                const currentPlayBtn = document.querySelector(`.play-btn[data-song-id="${currentSong.id}"]`);
                if (currentPlayBtn) {
                    currentPlayBtn.innerHTML = '<i class="fas fa-play"></i>';
                }
            } else {
                audioPlayer.play();
                playPauseIcon.classList.remove('fa-play');
                playPauseIcon.classList.add('fa-pause');
                
               
                const currentSong = songs[currentSongIndex];
                const currentPlayBtn = document.querySelector(`.play-btn[data-song-id="${currentSong.id}"]`);
                if (currentPlayBtn) {
                    currentPlayBtn.innerHTML = '<i class="fas fa-pause"></i>';
                }
            }
            isPlaying = !isPlaying;
        }

        
        function playNextSong() {
            if (currentSongIndex === -1 || !songs.length) return;
            const nextIndex = (currentSongIndex + 1) % songs.length;
            playSong(songs[nextIndex].id);
        }

        
        function playPrevSong() {
            if (currentSongIndex === -1 || !songs.length) return;
            const prevIndex = (currentSongIndex - 1 + songs.length) % songs.length;
            playSong(songs[prevIndex].id);
        }

        
        function setProgress(e) {
            if (!audioPlayer.duration || isNaN(audioPlayer.duration)) return;
            
            const width = this.clientWidth;
            const clickX = e.offsetX;
            const percent = clickX / width;
            audioPlayer.currentTime = percent * audioPlayer.duration;
        }

       
        function setVolume(e) {
            const width = this.clientWidth;
            const clickX = e.offsetX;
            const volume = Math.max(0, Math.min(1, clickX / width));
            audioPlayer.volume = volume;
            volumeLevel.style.width = `${volume * 100}%`;
            
          
            if (volume === 0) {
                muteBtn.innerHTML = '<i class="fas fa-volume-mute"></i>';
            } else if (volume < 0.5) {
                muteBtn.innerHTML = '<i class="fas fa-volume-down"></i>';
            } else {
                muteBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
            }
        }

        
        function toggleMute() {
            if (audioPlayer.volume > 0) {
                audioPlayer.volume = 0;
                volumeLevel.style.width = '0%';
                muteBtn.innerHTML = '<i class="fas fa-volume-mute"></i>';
            } else {
                audioPlayer.volume = 0.7;
                volumeLevel.style.width = '70%';
                muteBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
            }
        }

        
        function attachSongEventListeners() {
            
            document.querySelectorAll('.song-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    
                    if (!e.target.closest('.play-btn')) {
                        const songId = this.getAttribute('data-song-id');
                        playSong(songId);
                    }
                });
            });

            
            document.querySelectorAll('.play-btn').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation(); 
                    const songId = this.getAttribute('data-song-id');
                    
                   
                    const currentSong = songs[currentSongIndex];
                    if (currentSong && currentSong.id == songId && isPlaying) {
                        togglePlayPause();
                    } else {
                        playSong(songId);
                    }
                });
            });
        }

        
        function escapeHtml(str) {
            if (str === undefined || str === null) return '';
            return String(str)
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
                .replace(/"/g, '&quot;')
                .replace(/'/g, '&#039;');
        }

        
        playPauseBtn.addEventListener('click', togglePlayPause);
        document.getElementById('prev-btn').addEventListener('click', playPrevSong);
        document.getElementById('next-btn').addEventListener('click', playNextSong);
        progressBar.addEventListener('click', setProgress);
        volumeBar.addEventListener('click', setVolume);
        muteBtn.addEventListener('click', toggleMute);

        
        audioPlayer.addEventListener('timeupdate', updateProgress);

        audioPlayer.addEventListener('ended', function() {
            isPlaying = false;
            playPauseIcon.classList.remove('fa-pause');
            playPauseIcon.classList.add('fa-play');
            
           
            if (currentSongIndex !== -1) {
                const currentSong = songs[currentSongIndex];
                const currentPlayBtn = document.querySelector(`.play-btn[data-song-id="${currentSong.id}"]`);
                if (currentPlayBtn) {
                    currentPlayBtn.innerHTML = '<i class="fas fa-play"></i>';
                    currentPlayBtn.classList.remove('playing');
                }
            }
            

            playNextSong();
        });

 
        document.getElementById('prev-month').addEventListener('click', function() {
            alert('Loading previous month\'s hits...');
        });

        document.getElementById('next-month').addEventListener('click', function() {
            alert('Loading next month\'s hits...');
        });

        
        document.getElementById('current-month').textContent = new Date().toLocaleString('en-US', { 
            month: 'long', 
            year: 'numeric' 
        });

        
        audioPlayer.volume = 0.7;
        volumeLevel.style.width = '70%';

        
        document.addEventListener('DOMContentLoaded', loadSongs);
        
    </script>
</body>
</html>
